<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entrepreneurial Identity Assessment Report - {{ person.person_id }}</title>
    <style>
        /* Professional styling for Vertria reports */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fff;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header styling */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin: -20px -20px 40px -20px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        /* Section styling */
        .section {
            margin-bottom: 50px;
            page-break-inside: avoid;
        }
        
        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        .section h3 {
            color: #34495e;
            font-size: 1.3em;
            margin-bottom: 15px;
            margin-top: 25px;
        }
        
        /* Executive summary styling */
        .executive-summary {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            margin-bottom: 40px;
        }
        
        .executive-summary h2 {
            color: #667eea;
            border: none;
            margin-bottom: 15px;
        }
        
        /* Participant info styling */
        .participant-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .info-card {
            background: #fff;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .info-card .value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            display: block;
        }
        
        .info-card .label {
            color: #6c757d;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        /* Archetype styling */
        .archetype-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }
        
        .archetype-section h2 {
            color: white;
            border: none;
        }
        
        .archetype-name {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .archetype-description {
            font-size: 1.1em;
            opacity: 0.95;
            margin-bottom: 20px;
        }
        
        /* Traits grid */
        .traits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .trait-card {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .trait-score {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .trait-name {
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .trait-percentile {
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }
        
        /* Strengths and development areas */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .strengths, .development-areas {
            background: #fff;
            border-radius: 10px;
            padding: 25px;
            border: 1px solid #e9ecef;
        }
        
        .strengths {
            border-left: 5px solid #28a745;
        }
        
        .development-areas {
            border-left: 5px solid #ffc107;
        }
        
        .strengths h3 {
            color: #28a745;
        }
        
        .development-areas h3 {
            color: #fd7e14;
        }
        
        .strength-item, .development-item {
            background: #f8f9fa;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 3px solid #667eea;
        }
        
        /* Table styling */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Visualization containers */
        .visualization {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .visualization h3 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 20px;
        }
        
        /* Insights and narratives */
        .narrative-section {
            background: #fff;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .narrative-section p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Footer */
        .footer {
            background: #2c3e50;
            color: white;
            padding: 30px 0;
            text-align: center;
            margin: 40px -20px -20px -20px;
        }
        
        .footer p {
            opacity: 0.8;
        }
        
        /* Print styles */
        @media print {
            .header, .footer {
                margin: 0;
            }
            
            .section {
                page-break-inside: avoid;
            }
            
            .archetype-section {
                page-break-inside: avoid;
            }
        }
        
        /* Progress bars for scores */
        .score-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Entrepreneurial Identity Assessment</h1>
            <div class="subtitle">Comprehensive Psychometric Report</div>
        </div>
        
        <!-- Executive Summary -->
        <div class="executive-summary">
            <h2>Executive Summary</h2>
            <p><strong>Participant:</strong> {{ person.person_id }}</p>
            <p>This comprehensive assessment evaluates entrepreneurial traits and behavioral patterns to provide insights into leadership style, innovation capacity, and growth opportunities. The analysis is based on validated psychometric principles and compares results against entrepreneurial benchmarks.</p>
        </div>
        
        <!-- Participant Overview -->
        <div class="section">
            <h2>Assessment Overview</h2>
            <div class="participant-info">
                <div class="info-card">
                    <span class="value">{{ "%.1f"|format(person.overall_score) }}</span>
                    <div class="label">Overall Score</div>
                </div>
                {% if person.overall_percentile %}
                <div class="info-card">
                    <span class="value">{{ "%.0f"|format(person.overall_percentile) }}th</span>
                    <div class="label">Percentile Rank</div>
                </div>
                {% endif %}
                <div class="info-card">
                    <span class="value">{{ person.construct_scores|length }}</span>
                    <div class="label">Traits Assessed</div>
                </div>
                <div class="info-card">
                    <span class="value">{{ "%.1f"|format(person.completion_rate * 100) }}%</span>
                    <div class="label">Completion Rate</div>
                </div>
            </div>
        </div>
        
        <!-- Archetype Section -->
        {% if cluster and cluster.archetype_name %}
        <div class="archetype-section">
            <h2>Your Entrepreneurial Archetype</h2>
            <div class="archetype-name">{{ cluster.archetype_name }}</div>
            <div class="archetype-description">{{ cluster.description }}</div>
            <p><strong>Cluster Size:</strong> {{ cluster.size }} participants share this archetype profile</p>
        </div>
        {% endif %}
        
        <!-- Trait Scores -->
        <div class="section">
            <h2>Detailed Trait Analysis</h2>
            <div class="traits-grid">
                {% for construct in person.construct_scores %}
                <div class="trait-card">
                    <div class="trait-score">{{ "%.1f"|format(construct.score) }}</div>
                    <div class="trait-name">{{ construct.construct_name }}</div>
                    {% if construct.percentile %}
                    <div class="trait-percentile">{{ "%.0f"|format(construct.percentile) }}th percentile</div>
                    {% endif %}
                    <div class="score-bar">
                        <div class="score-fill" style="width: {{ (construct.score * 100)|int }}%"></div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <!-- Strengths and Development Areas -->
        {% if cluster and cluster.characteristics.archetype_key %}
        <div class="section">
            <h2>Strengths & Development Opportunities</h2>
            <div class="two-column">
                <div class="strengths">
                    <h3>Key Strengths</h3>
                    {% if archetype_profile and archetype_profile.strengths %}
                        {% for strength in archetype_profile.strengths %}
                        <div class="strength-item">{{ strength }}</div>
                        {% endfor %}
                    {% else %}
                        <div class="strength-item">Strategic thinking and planning</div>
                        <div class="strength-item">Problem-solving capabilities</div>
                        <div class="strength-item">Leadership potential</div>
                    {% endif %}
                </div>
                <div class="development-areas">
                    <h3>Development Areas</h3>
                    {% if archetype_profile and archetype_profile.development_areas %}
                        {% for area in archetype_profile.development_areas %}
                        <div class="development-item">{{ area }}</div>
                        {% endfor %}
                    {% else %}
                        <div class="development-item">Risk management strategies</div>
                        <div class="development-item">Team collaboration skills</div>
                        <div class="development-item">Innovation mindset</div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
        
        <!-- Detailed Scores Table -->
        <div class="section">
            <h2>Complete Score Breakdown</h2>
            <table>
                <thead>
                    <tr>
                        <th>Trait</th>
                        <th>Raw Score</th>
                        <th>Percentile</th>
                        <th>Interpretation</th>
                    </tr>
                </thead>
                <tbody>
                    {% for construct in person.construct_scores %}
                    <tr>
                        <td><strong>{{ construct.construct_name }}</strong></td>
                        <td>{{ "%.1f"|format(construct.score) }}</td>
                        <td>
                            {% if construct.percentile %}
                                {{ "%.0f"|format(construct.percentile) }}th
                            {% else %}
                                N/A
                            {% endif %}
                        </td>
                        <td>
                            {% if construct.score >= 0.7 %}
                                <span style="color: #28a745;">High</span>
                            {% elif construct.score >= 0.5 %}
                                <span style="color: #ffc107;">Moderate</span>
                            {% else %}
                                <span style="color: #dc3545;">Developing</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <!-- Narrative Insights -->
        {% if narratives %}
        <div class="section">
            <h2>Personalized Insights</h2>
            {% for section, text in narratives.items() %}
            <div class="narrative-section">
                <h3>{{ section }}</h3>
                <p>{{ text }}</p>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Visualizations -->
        {% if visuals %}
        <div class="section">
            <h2>Visual Analysis</h2>
            {% for title, html in visuals.items() %}
            <div class="visualization">
                <h3>{{ title|title }}</h3>
                {{ html | safe }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Footer -->
        <div class="footer">
            <p>Generated by Vertria Psychometric Assessment System</p>
            <p>🤖 Created with advanced psychometric analysis • Report Date: {{ report_date or "N/A" }}</p>
        </div>
    </div>
</body>
</html>